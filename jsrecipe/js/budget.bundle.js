!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=367)}({367:function(e,t,n){"use strict";(function(e,t){var n=function(){e.calculateBudget();var n=e.getBudget();t.displayBudget(n)},i=function(){var i,a,r;i=t.getinput(),r=t.getMaxValue(),""!==i.description&&!isNaN(i.value)&&i.value>0&&i.value<r&&(a=e.addItem(i.type,i.description,i.value),t.addListItem(a,i.type),t.clearFields(),n(),o())},o=function(){e.calculatePercentages();var n=e.getPercentages();t.displayPercentages(n)},a=function(i){var a,r,c,l;(l=i.target.parentNode.parentNode.parentNode.id)&&(r=(a=l.split("-"))[0],c=a[1],e.deleteItem(r,c),t.deleteListItem(l),n(),o())};return{init:function(){console.log("Application init"),t.displayMonth(),t.displayBudget({budget:0,totalIncome:0,totalExpense:0,percentage:-1}),function(){var e=t.getDOMstrings(),n=t.getMaxValue();document.querySelector(e.inputBtn).addEventListener("click",i),document.addEventListener("keypress",function(e){13!==e.keyCode&&13!==e.which||i()}),document.querySelector(e.container).addEventListener("click",a),document.querySelector(e.inputValue).addEventListener("input",function(){this.value>n?t.displayTip():t.hideTip()}),document.querySelector(e.inputType).addEventListener("change",t.changeType)}()}}})(function(){var e=function(e,t,n){this.id=e,this.description=t,this.value=n,this.percentage=-1};e.prototype.calculatePercentage=function(e){if(e>0){var t=this.value/e*100,n=Math.round(t);this.percentage=0===n?t.toFixed(3):n}else this.percentage=-1},e.prototype.getPercentage=function(){return this.percentage};var t=function(e){var t=0;n.allItems[e].forEach(function(e){t+=e.value}),n.totals[e]=t},n={allItems:{expense:[],income:[]},totals:{expense:0,income:0},budget:0,percentage:-1};return{addItem:function(t,i,o){var a,r;return r=n.allItems[t].length>0?n.allItems[t][n.allItems[t].length-1].id+1:0,"expense"===t?a=new e(r,i,o):"income"===t&&(a=new function(e,t,n){this.id=e,this.description=t,this.value=n}(r,i,o)),n.allItems[t].push(a),a},deleteItem:function(e,t){var i;-1!==(i=n.allItems[e].map(function(e){return e.id}).indexOf(parseInt(t)))&&n.allItems[e].splice(i,1)},calculateBudget:function(){if(t("expense"),t("income"),n.budget=n.totals.income-n.totals.expense,n.totals.income>0){var e=n.totals.expense/n.totals.income*100,i=Math.round(e);n.percentage=0===i?e.toFixed(3):i}else n.percentage=-1},calculatePercentages:function(){n.allItems.expense.forEach(function(e){e.calculatePercentage(n.totals.income)})},getPercentages:function(){return n.allItems.expense.map(function(e){return e.getPercentage()})},getBudget:function(){return{budget:n.budget,totalIncome:n.totals.income,totalExpense:n.totals.expense,percentage:n.percentage}},test:function(){console.log(n)}}}(),function(){var e={inputType:".add__type",inputDescription:".add__description",inputValue:".add__value",inputBtn:".add__btn",incomeContainer:".income__list",expensesContainer:".expenses__list",budgetLabel:".budget__value",incomeLabel:".budget__income--value",expensesLabel:".budget__expenses--value",percentageLabel:".budget__expenses--percentage",container:".container",expensesPercentageLabel:".item__percentage",tooltipText:".tooltiptext",dateLabel:".budget__title--month"},t=function(e,t){var n,i,o;if((i=(n=(t=(t=Math.abs(t)).toFixed(2)).split("."))[0]).length>3){for(var a="",r=-3,c=i.length,l=0;l<Math.ceil(i.length/3);l++){var u=i.slice(r,c);a=0===a.length?u:u+","+a,r-=3,c-=3}i=a}return o=n[1],("expense"===e?"-":"+")+" "+i+"."+o},n=function(e,t){for(var n=0;n<e.length;n++)t(e[n],n)};return{getinput:function(){var t=document.querySelector(e.inputType).value,n=document.querySelector(e.inputDescription).value,i=document.querySelector(e.inputValue).value;return{type:t,description:n,value:parseFloat(i)}},addListItem:function(n,i){var o,a,r;"income"===i?(r=e.incomeContainer,o='<div class="item clearfix" id="income-%id%"><div class="item__description">%description%</div><div class="right clearfix"><div class="item__value">%value%</div><div class="item__delete"><button class="item__delete--btn"><i class="ion-ios-close-outline"></i></button></div></div></div>'):"expense"===i&&(r=e.expensesContainer,o='<div class="item clearfix" id="expense-%id%"><div class="item__description">%description%</div><div class="right clearfix"><div class="item__value">%value%</div><div class="item__percentage">21%</div><div class="item__delete"><button class="item__delete--btn"><i class="ion-ios-close-outline"></i></button></div></div></div>'),a=(a=(a=o.replace("%id%",n.id)).replace("%description%",n.description)).replace("%value%",t(i,n.value)),document.querySelector(r).insertAdjacentHTML("beforeend",a)},deleteListItem:function(e){var t=document.getElementById(e);t.parentNode.removeChild(t)},clearFields:function(){var t,n;t=document.querySelectorAll(e.inputDescription+", "+e.inputValue),(n=Array.prototype.slice.call(t)).forEach(function(e,t,n){e.value=""}),n[0].focus()},displayBudget:function(n){var i;i=n.budget>0?"income":"expense",document.querySelector(e.budgetLabel).textContent=t(i,n.budget),document.querySelector(e.incomeLabel).textContent=t("income",n.totalIncome),document.querySelector(e.expensesLabel).textContent=t("expense",n.totalExpense),n.percentage>0?document.querySelector(e.percentageLabel).textContent=n.percentage+"%":document.querySelector(e.percentageLabel).textContent="---"},displayPercentages:function(t){var i=document.querySelectorAll(e.expensesPercentageLabel);n(i,function(e,n){t[n]>0?e.textContent=t[n]+"%":e.textContent="---"})},displayTip:function(){document.querySelector(e.tooltipText).style.visibility="visible"},hideTip:function(){document.querySelector(e.tooltipText).style.visibility="hidden"},getMaxValue:function(){return 9e5},displayMonth:function(){var t,n,i,o;o=["January","February","March","April","May","June","July","August","September","October","November","December"],n=(t=new Date).getMonth(),i=t.getFullYear(),document.querySelector(e.dateLabel).textContent=o[n]+" "+i},changeType:function(){var t=document.querySelectorAll(e.inputType+","+e.inputDescription+","+e.inputValue);n(t,function(e){e.classList.toggle("red-focus")}),document.querySelector(e.inputBtn).classList.toggle("red")},getDOMstrings:function(){return e}}}()).init()}});